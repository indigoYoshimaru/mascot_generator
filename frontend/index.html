<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="version" content="1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" />
    <title>OM Mascot</title>
</head>

<body>
    <main class="container">
        <h1>OM Mascot Generator</h1>
        <div class="g-signin2" data-onsuccess="onSignIn"></div>

        <div class="grid">
            <article>
                <h2>Prompt</h2>
                <textarea></textarea>
                <section>
                    <h2>Logo options</h2>
                    <input type="radio" name="option" value="op1" />
                    <label>Option 1</label>
                    <input type="radio" name="option" value="op2" />
                    <label>Option 2</label>
                    <input type="radio" name="option" value="op3" />
                    <label>Option 3</label>
                </section>
                <button id="generate-button">Generate</button>
            </article>
            <article>
                <h2>Image gallery</h2>
                <div id="gallery"></div>
            </article>
        </div>
        <script src="scripts/fingerprint.js"></script>
        <script>
            beUrl = "https://ecd9-2402-800-637c-32-8ac1-7f11-c9b1-249c.ngrok-free.app/"
            let ui = {
                htmlGenerateButton: document.querySelector("#generate-button"),
                htmlGallery: document.querySelector("#gallery"),
            }

            getVisitorId()
                .then(visitorInfo => {
                    console.log(visitorInfo);
                    let data = JSON.stringify({
                        "visitor_id": visitorInfo['visitorId'],
                        "status": visitorInfo['status']
                    });
                    console.log(data);
                    fetch(beUrl + "user/register", {
                        method: "POST",
                        mode: 'cors',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json',
                            'Access-Control-Allow-Origin': 'http://0.0.0.0:8001',
                            'Access-Control-Request-Method': 'POST',
                            'Access-Control-Request-Headers':'Content-Type, Authorization'
                        },
                        body: data,
                    })
                        .then(response => response.json())
                        .then(result => {
                            // Handle the response data here
                            console.log(result);
                        })
                        .catch(error => {
                            // Handle any errors that occur during the request
                            console.error(error);
                        });
                })
                .catch(error => {
                    console.error(error);
                });

        </script>
    </main>
</body>

</html>